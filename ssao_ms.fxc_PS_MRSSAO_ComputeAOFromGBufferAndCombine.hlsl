//
// Generated by Microsoft (R) HLSL Shader Compiler 9.29.952.3111
//
//
// Buffer Definitions: 
//
// cbuffer rage_matrices
// {
//
//   row_major float4x4 gWorld;         // Offset:    0 Size:    64 [unused]
//   row_major float4x4 gWorldView;     // Offset:   64 Size:    64 [unused]
//   row_major float4x4 gWorldViewProj; // Offset:  128 Size:    64 [unused]
//   row_major float4x4 gViewInverse;   // Offset:  192 Size:    64
//
// }
//
// cbuffer ssao_locals
// {
//
//   float4 g_projParams;               // Offset:    0 Size:    16
//   float4 gNormalOffset;              // Offset:   16 Size:    16 [unused]
//   float4 gOffsetScale0;              // Offset:   32 Size:    16 [unused]
//   float4 gOffsetScale1;              // Offset:   48 Size:    16 [unused]
//   float g_SSAOStrength;              // Offset:   64 Size:     4 [unused]
//   float4 g_CPQSMix_QSFadeIn;         // Offset:   80 Size:    16 [unused]
//   float4 TargetSizeParam;            // Offset:   96 Size:    16
//   float4 FallOffAndKernelParam;      // Offset:  112 Size:    16
//   float4 g_MSAAPointTexture1_Dim;    // Offset:  128 Size:    16 [unused]
//   float4 g_MSAAPointTexture2_Dim;    // Offset:  144 Size:    16 [unused]
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// PointTexture2                     texture   float          2d             t6      1 
// PointTexture3                     texture   float          2d             t7      1 
// PointTexture4                     texture  float4        2dMS            t13      1 
// PointTexture5                     texture   float        2dMS            t14      1 
// rage_matrices                     cbuffer      NA          NA            cb1      1 
// ssao_locals                       cbuffer      NA          NA           cb12      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Position              0   xyzw        0      POS   float   xy  
// TEXCOORD                 0   xyzw        1     NONE   float       
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Target                0   xyzw        0   TARGET   float   xyzw
//
ps_4_1
dcl_globalFlags refactoringAllowed
dcl_constantbuffer CB1[15], immediateIndexed
dcl_constantbuffer CB12[8], immediateIndexed
dcl_resource_texture2d (float,float,float,float) t6
dcl_resource_texture2d (float,float,float,float) t7
dcl_resource_texture2dms(0) (float,float,float,float) t13
dcl_resource_texture2dms(0) (float,float,float,float) t14
dcl_input_ps_siv linear noperspective v0.xy, position
dcl_output o0.xyzw
dcl_temps 15
ftoi r0.xy, v0.xyxx
mov r0.zw, l(0,0,0,0)
ld r1.x, r0.xyww, t6.xyzw
mul r1.yz, v0.xxyx, cb12[6].zzwz
add r1.x, r1.x, cb12[0].w
div r1.x, cb12[0].z, r1.x
mad r1.yz, r1.yyzy, l(0.000000, 2.000000, -2.000000, 0.000000), l(0.000000, -1.000000, 1.000000, 0.000000)
mul r2.xy, r1.yzyy, cb12[0].xyxx
mov r2.z, l(1.000000)
mul r1.y, r1.x, r2.z
round_z r1.zw, v0.xxxy
mad r1.zw, r1.zzzw, l(0.000000, 0.000000, 0.500000, 0.500000), l(0.000000, 0.000000, -0.250000, -0.250000)
frc r3.xy, r1.zwzz
add r3.zw, -r3.xxxy, l(0.000000, 0.000000, 1.000000, 1.000000)
mul r3.xyzw, r3.wwyy, r3.zxzx
iadd r4.xyz, r0.xyxx, l(-1, -1, -1, 0)
and r5.xyz, r0.xyxx, l(1, 1, 1, 0)
iadd r4.xyz, r4.xyzx, r5.xyzx
iadd r5.xyz, r4.zyzz, l(0, 0, 1, 0)
iadd r4.xyz, r4.xyzx, l(0, 1, 1, 0)
xor r6.xyzw, r5.xyzy, l(2, 2, 2, 2)
imax r7.xyzw, r5.xyzy, -r5.xyzy
ushr r7.xyzw, r7.xyzw, l(1)
ineg r8.xyzw, r7.xyzw
and r6.xyzw, r6.xyzw, l(0x80000000, 0x80000000, 0x80000000, 0x80000000)
movc r6.xyzw, r6.zwxy, r8.zwxy, r7.zwxy
mov r7.xy, r6.zwzz
mov r7.zw, l(0,0,0,0)
ld r7.x, r7.xyzw, t7.xyzw
mov r6.zw, l(0,0,0,0)
ld r7.y, r6.xyzw, t7.yxzw
xor r6.xyzw, r4.xyzy, l(2, 2, 2, 2)
imax r8.xyzw, r4.xyzy, -r4.xyzy
ushr r8.xyzw, r8.xyzw, l(1)
ineg r9.xyzw, r8.xyzw
and r6.xyzw, r6.xyzw, l(0x80000000, 0x80000000, 0x80000000, 0x80000000)
movc r6.xyzw, r6.zwxy, r9.zwxy, r8.zwxy
mov r8.xy, r6.zwzz
mov r8.zw, l(0,0,0,0)
ld r7.z, r8.xyzw, t7.yzxw
mov r6.zw, l(0,0,0,0)
ld r7.w, r6.xyzw, t7.yzwx
mov r5.w, l(0)
ldms r1.z, r5.xyww, t14.yzxw, l(0)
add r6.x, -r1.z, cb12[0].w
ldms r1.z, r5.zyww, t14.yzxw, l(0)
add r6.y, -r1.z, cb12[0].w
mov r4.w, l(0)
ldms r1.z, r4.xyww, t14.yzxw, l(0)
add r6.z, -r1.z, cb12[0].w
ldms r1.z, r4.zyww, t14.yzxw, l(0)
add r6.w, -r1.z, cb12[0].w
add r4.xyzw, r6.xyzw, l(1.000000, 1.000000, 1.000000, 1.000000)
div r4.xyzw, cb12[0].zzzz, r4.xyzw
mad r4.xyzw, -r2.zzzz, r1.xxxx, r4.xyzw
add r4.xyzw, |r4.xyzw|, l(1.000000, 1.000000, 1.000000, 1.000000)
div r4.xyzw, l(1.000000, 1.000000, 1.000000, 1.000000), r4.xyzw
log r4.xyzw, r4.xyzw
mul r4.xyzw, r4.xyzw, cb12[7].wwww
exp r4.xyzw, r4.xyzw
mul r3.xyzw, r3.xyzw, r4.xyzw
dp4 r1.z, r3.xyzw, r7.xyzw
mul r3.xy, cb12[6].xyxx, cb12[7].xxxx
mul r3.xy, r3.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000)
mul r1.yw, r1.yyyy, cb12[0].xxxy
div r1.yw, r3.xxxy, r1.yyyw
max r2.w, r1.w, r1.y
ge r2.w, r2.w, l(1.000000)
if_nz r2.w
  ldms r3.xyz, r0.xyzw, t13.xyzw, l(0)
  mad r3.xyz, r3.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000), l(-1.000000, -1.000000, -1.000000, 0.000000)
  dp3 r4.x, cb1[12].xyzx, r3.xyzx
  dp3 r4.y, cb1[13].xyzx, r3.xyzx
  dp3 r0.z, cb1[14].xyzx, r3.xyzx
  mov r4.z, -r0.z
  min r0.zw, r1.yyyw, cb12[7].yyyy
  ftoi r0.zw, r0.zzzw
  imax r0.z, r0.w, r0.z
  mul r0.w, cb12[7].x, cb12[7].x
  mov r3.zw, l(0,0,0,0)
  mov r5.zw, l(0,0,0,0)
  mov r6.zw, l(0,0,0,0)
  mov r7.zw, l(0,0,0,0)
  mov r1.yw, l(0,0,0,0)
  mov r2.w, l(0)
  loop 
    ilt r4.w, r0.z, r2.w
    breakc_nz r4.w
    ineg r8.x, r2.w
    mov r8.y, r2.w
    mov r9.xy, r1.ywyy
    mov r4.w, l(1)
    loop 
      ilt r9.z, r0.z, r4.w
      breakc_nz r9.z
      mov r8.z, r4.w
      iadd r10.xyzw, r0.xyxy, r8.yzzx
      ineg r8.w, r4.w
      iadd r11.xyzw, r0.xyxy, r8.xwwy
      mov r3.xy, r10.xyxx
      ldms r3.x, r3.xyzw, t14.xyzw, l(0)
      add r12.x, -r3.x, cb12[0].w
      mov r5.xy, r10.zwzz
      ldms r3.x, r5.xyzw, t14.xyzw, l(0)
      add r12.y, -r3.x, cb12[0].w
      mov r6.xy, r11.xyxx
      ldms r3.x, r6.xyzw, t14.xyzw, l(0)
      add r12.z, -r3.x, cb12[0].w
      mov r7.xy, r11.zwzz
      ldms r3.x, r7.xyzw, t14.xyzw, l(0)
      add r12.w, -r3.x, cb12[0].w
      itof r13.xy, r10.xzxx
      itof r13.zw, r11.xxxz
      add r13.xyzw, r13.xyzw, l(0.500000, 0.500000, 0.500000, 0.500000)
      mul r13.xyzw, r13.xyzw, cb12[6].zzzz
      itof r10.xy, r10.ywyy
      itof r10.zw, r11.yyyw
      add r10.xyzw, r10.xyzw, l(0.500000, 0.500000, 0.500000, 0.500000)
      mul r10.xyzw, r10.xyzw, cb12[6].wwww
      add r11.xyzw, r12.xyzw, l(1.000000, 1.000000, 1.000000, 1.000000)
      div r11.xyzw, cb12[0].zzzz, r11.xyzw
      mad r12.xyzw, r13.xyzw, l(2.000000, 2.000000, 2.000000, 2.000000), l(-1.000000, -1.000000, -1.000000, -1.000000)
      mul r12.xyzw, r11.xyzw, r12.xyzw
      mul r12.xyzw, r12.xyzw, cb12[0].xxxx
      mad r10.xyzw, -r10.xyzw, l(2.000000, 2.000000, 2.000000, 2.000000), l(1.000000, 1.000000, 1.000000, 1.000000)
      mul r10.xyzw, r11.xyzw, r10.xyzw
      mul r10.xyzw, r10.xyzw, cb12[0].yyyy
      mov r13.x, r12.x
      mov r13.y, r10.x
      mov r13.z, r11.x
      mad r13.xyz, -r2.xyzx, r1.xxxx, r13.xyzx
      mov r14.x, r12.y
      mov r14.y, r10.y
      mov r14.z, r11.y
      mad r14.xyz, -r2.xyzx, r1.xxxx, r14.xyzx
      mov r11.x, r12.z
      mov r11.y, r10.z
      mad r10.xyz, -r2.xyzx, r1.xxxx, r11.xyzx
      mov r11.x, r12.w
      mov r11.y, r10.w
      mad r11.xyz, -r2.xyzx, r1.xxxx, r11.xywx
      dp3 r12.x, r13.xyzx, r13.xyzx
      dp3 r12.y, r14.xyzx, r14.xyzx
      dp3 r12.z, r10.xyzx, r10.xyzx
      dp3 r12.w, r11.xyzx, r11.xyzx
      dp3 r13.x, r13.xyzx, r4.xyzx
      dp3 r13.y, r14.xyzx, r4.xyzx
      dp3 r13.z, r10.xyzx, r4.xyzx
      dp3 r13.w, r11.xyzx, r4.xyzx
      max r10.xyzw, r13.xyzw, l(0.000000, 0.000000, 0.000000, 0.000000)
      mul r10.xyzw, r10.xyzw, r10.xyzw
      div r10.xyzw, r10.xyzw, r12.xyzw
      mad r11.xyzw, r10.xyzw, l(-0.828427, -0.828427, -0.828427, -0.828427), l(1.828427, 1.828427, 1.828427, 1.828427)
      mul r10.xyzw, r10.xyzw, r11.xyzw
      div r11.xyzw, r12.xyzw, r0.wwww
      min r11.xyzw, r11.xyzw, l(1.000000, 1.000000, 1.000000, 1.000000)
      add r11.xyzw, -r11.xyzw, l(1.000000, 1.000000, 1.000000, 1.000000)
      dp4 r3.x, r11.xyzw, r10.xyzw
      add r9.x, r3.x, r9.x
      add r9.y, r9.y, l(4.000000)
      iadd r4.w, r4.w, l(1)
    endloop 
    mov r1.yw, r9.xxxy
    iadd r2.w, r2.w, l(1)
  endloop 
  div r0.x, r1.y, r1.w
else 
  mov r0.x, l(0)
endif 
max o0.xyzw, r1.zzzz, r0.xxxx
ret 
// Approximately 171 instruction slots used
